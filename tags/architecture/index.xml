<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Architecture on phongthien</title><link>https://phongthien99.github.io/tags/architecture/</link><description>Recent content in Architecture on phongthien</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 26 Jan 2026 00:17:00 +0800</lastBuildDate><atom:link href="https://phongthien99.github.io/tags/architecture/index.xml" rel="self" type="application/rss+xml"/><item><title>Designing a Centralized Authentication System with an API Gateway and Identity Broker</title><link>https://phongthien99.github.io/posts/designing-a-centralized-authentication-system-with-an-api-gateway-and-identity-broker/</link><pubDate>Mon, 26 Jan 2026 00:17:00 +0800</pubDate><guid>https://phongthien99.github.io/posts/designing-a-centralized-authentication-system-with-an-api-gateway-and-identity-broker/</guid><description>&lt;h1 id="designing-a-centralized-authentication-system-with-an-api-gateway-and-identity-broker"&gt;Designing a Centralized Authentication System with an API Gateway and Identity Broker
&lt;/h1&gt;&lt;h2 id="Ä‘áº·t-váº¥n-Ä‘á»"&gt;Äáº·t váº¥n Ä‘á»
&lt;/h2&gt;&lt;p&gt;Trong cÃ¡c há»‡ thá»‘ng hiá»‡n Ä‘áº¡i, Ä‘áº·c biá»‡t lÃ  há»‡ thá»‘ng phÃ¢n tÃ¡n vÃ  microservices, bÃ i toÃ¡n xÃ¡c thá»±c vÃ  phÃ¢n quyá»n ngÃ y cÃ ng trá»Ÿ nÃªn phá»©c táº¡p. Nhiá»u há»‡ thá»‘ng Ä‘á»ƒ má»—i dá»‹ch vá»¥ tá»± xá»­ lÃ½ xÃ¡c thá»±c, dáº«n Ä‘áº¿n logic trÃ¹ng láº·p vÃ  khÃ³ báº£o trÃ¬. á» chiá»u ngÆ°á»£c láº¡i, viá»‡c Ä‘á»ƒ client phá»¥ thuá»™c trá»±c tiáº¿p vÃ o há»‡ thá»‘ng xÃ¡c thá»±c bÃªn ngoÃ i láº¡i gÃ¢y ra rá»§i ro khÃ³a cháº·t vÃ o cÃ´ng cá»¥ cá»¥ thá»ƒ.&lt;/p&gt;
&lt;p&gt;Váº¥n Ä‘á» cá»‘t lÃµi náº±m á»Ÿ viá»‡c thiáº¿u ranh giá»›i rÃµ rÃ ng giá»¯a xÃ¡c thá»±c ngÆ°á»i dÃ¹ng, quáº£n lÃ½ danh tÃ­nh ná»™i bá»™ vÃ  kiá»ƒm soÃ¡t truy cáº­p API. Khi cÃ¡c trÃ¡ch nhiá»‡m nÃ y bá»‹ trá»™n láº«n, há»‡ thá»‘ng khÃ³ má»Ÿ rá»™ng, khÃ³ thay Ä‘á»•i vÃ  khÃ³ Ã¡p dá»¥ng cÃ¡c nguyÃªn táº¯c báº£o máº­t hiá»‡n Ä‘áº¡i nhÆ° Zero Trust. Do Ä‘Ã³, cáº§n má»™t cÃ¡ch tiáº¿p cáº­n kiáº¿n trÃºc giÃºp tÃ¡ch báº¡ch trÃ¡ch nhiá»‡m, giáº£m phá»¥ thuá»™c cÃ´ng cá»¥ vÃ  Ä‘áº£m báº£o an toÃ n lÃ¢u dÃ i.&lt;/p&gt;
&lt;h2 id="giáº£i-phÃ¡p-thiáº¿t-káº¿"&gt;Giáº£i phÃ¡p thiáº¿t káº¿
&lt;/h2&gt;&lt;h3 id="21-Ä‘á»‹nh-hÆ°á»›ng-kiáº¿n-trÃºc"&gt;2.1 Äá»‹nh hÆ°á»›ng kiáº¿n trÃºc
&lt;/h3&gt;&lt;p&gt;Giáº£i phÃ¡p Ä‘Æ°á»£c xÃ¢y dá»±ng theo Ä‘á»‹nh hÆ°á»›ng &lt;strong&gt;xÃ¡c thá»±c táº­p trung vÃ  tÃ¡ch báº¡ch trÃ¡ch nhiá»‡m&lt;/strong&gt;, trong Ä‘Ã³ báº£o máº­t Ä‘Æ°á»£c Ä‘Æ°a lÃªn ranh giá»›i há»‡ thá»‘ng thay vÃ¬ phÃ¢n tÃ¡n trong tá»«ng dá»‹ch vá»¥. Má»¥c tiÃªu chÃ­nh lÃ  giáº£m sá»± phá»¥ thuá»™c giá»¯a cÃ¡c thÃ nh pháº§n, trÃ¡nh khÃ³a cháº·t vÃ o cÃ´ng cá»¥ cá»¥ thá»ƒ vÃ  Ä‘áº£m báº£o kháº£ nÄƒng má»Ÿ rá»™ng lÃ¢u dÃ i.&lt;/p&gt;
&lt;h3 id="22-phÃ¢n-táº§ng-vÃ -ranh-giá»›i-há»‡-thá»‘ng"&gt;2.2 PhÃ¢n táº§ng vÃ  ranh giá»›i há»‡ thá»‘ng
&lt;/h3&gt;&lt;p&gt;Kiáº¿n trÃºc Ä‘Æ°á»£c tá»• chá»©c thÃ nh cÃ¡c táº§ng logic rÃµ rÃ ng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Edge Layer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;LÃ  ranh giá»›i tiáº¿p xÃºc vá»›i bÃªn ngoÃ i, chá»‹u trÃ¡ch nhiá»‡m kiá»ƒm soÃ¡t truy cáº­p, thá»±c thi chÃ­nh sÃ¡ch báº£o máº­t á»Ÿ má»©c háº¡ táº§ng vÃ  báº£o vá»‡ há»‡ thá»‘ng ná»™i bá»™.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Security / Broker Layer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ÄÃ³ng vai trÃ² trung tÃ¢m trong viá»‡c xá»­ lÃ½ xÃ¡c thá»±c, phÃ¡t hÃ nh danh tÃ­nh vÃ  kiá»ƒm soÃ¡t quyá»n truy cáº­p. Táº§ng nÃ y Ä‘Ã³ng vai trÃ² lá»›p Ä‘á»‡m giá»¯a há»‡ thá»‘ng ná»™i bá»™ vÃ  cÃ¡c há»‡ thá»‘ng danh tÃ­nh bÃªn ngoÃ i.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Identity Layer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Chá»‹u trÃ¡ch nhiá»‡m xÃ¡c minh danh tÃ­nh ngÆ°á»i dÃ¹ng, Ä‘á»™c láº­p vá»›i routing, nghiá»‡p vá»¥ vÃ  chÃ­nh sÃ¡ch truy cáº­p ná»™i bá»™.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Application Layer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Táº­p trung xá»­ lÃ½ logic nghiá»‡p vá»¥, khÃ´ng tham gia vÃ o cÃ¡c quyáº¿t Ä‘á»‹nh liÃªn quan Ä‘áº¿n xÃ¡c thá»±c hay danh tÃ­nh.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Viá»‡c xÃ¡c Ä‘á»‹nh rÃµ ranh giá»›i giÃºp há»‡ thá»‘ng dá»… hiá»ƒu, dá»… báº£o trÃ¬ vÃ  giáº£m coupling giá»¯a cÃ¡c thÃ nh pháº§n.&lt;/p&gt;
&lt;h3 id="23-design-concept"&gt;2.3 Design Concept
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Design Concept&lt;/th&gt;
&lt;th&gt;Ã nghÄ©a trong kiáº¿n trÃºc&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Single Responsibility Principle (SRP)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Má»—i thÃ nh pháº§n chá»‰ Ä‘áº£m nhiá»‡m má»™t trÃ¡ch nhiá»‡m: Gateway xá»­ lÃ½ routing &amp;amp; enforcement, Broker xá»­ lÃ½ xÃ¡c thá»±c vÃ  token, IdP quáº£n lÃ½ danh tÃ­nh, Backend táº­p trung nghiá»‡p vá»¥&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Separation of Concerns (SoC)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;TÃ¡ch rÃµ network, security, identity vÃ  business logic; trÃ¡nh backend xá»­ lÃ½ OAuth hay gateway xá»­ lÃ½ login flow&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Identity Broker / IdP Facade&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Broker che giáº¥u IdP tháº­t khá»i client &amp;amp; backend, cho phÃ©p thay Ä‘á»•i hoáº·c bá»• sung IdP mÃ  khÃ´ng áº£nh hÆ°á»Ÿng há»‡ thá»‘ng&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Authenticate as Early as Possible&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;XÃ¡c thá»±c request ngay táº¡i táº§ng gateway trÆ°á»›c khi vÃ o há»‡ thá»‘ng ná»™i bá»™, giáº£m rá»§i ro báº£o máº­t vÃ  táº£i cho backend&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;Openâ€“Closed Principle (OCP)&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;Má»Ÿ rá»™ng IdP, auth rule, claim structure mÃ  khÃ´ng cáº§n sá»­a client hay backend&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="implementation"&gt;Implementation
&lt;/h2&gt;&lt;p&gt;Pháº§n nÃ y trÃ¬nh bÃ y cÃ¡ch hiá»‡n thá»±c kiáº¿n trÃºc báº±ng cÃ¡c cÃ´ng cá»¥ phá»• biáº¿n trong thá»±c táº¿, bÃ¡m sÃ¡t sÆ¡ Ä‘á»“ tá»•ng thá»ƒ Ä‘Ã£ mÃ´ táº£.&lt;/p&gt;
&lt;h2 id="31-edge-layer--api-gateway"&gt;3.1 Edge Layer â€“ API Gateway
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Traefik (Ingress / API Gateway)&lt;/li&gt;
&lt;li&gt;Nginx / Envoy (tÆ°Æ¡ng Ä‘Æ°Æ¡ng)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Vai trÃ²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Entry point duy nháº¥t cá»§a há»‡ thá»‘ng&lt;/li&gt;
&lt;li&gt;Routing request&lt;/li&gt;
&lt;li&gt;Terminate TLS&lt;/li&gt;
&lt;li&gt;Enforce authentication&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CÃ¡ch hiá»‡n thá»±c vá»›i Traefik&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sá»­ dá»¥ng &lt;code&gt;IngressRoute&lt;/code&gt; hoáº·c &lt;code&gt;HTTPRouter&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Route:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/auth/*&lt;/code&gt; â†’ Broker Gateway&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/api/*&lt;/code&gt; â†’ Backend services&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;DÃ¹ng &lt;strong&gt;forwardAuth middleware&lt;/strong&gt;:
&lt;ul&gt;
&lt;li&gt;Má»i API request Ä‘Æ°á»£c gá»i sang &lt;code&gt;/auth/verify&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Chá»‰ cho phÃ©p request há»£p lá»‡ Ä‘i tiáº¿p&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ‘‰ Traefik lÃºc nÃ y Ä‘Ã³ng vai trÃ² &lt;strong&gt;Policy Enforcement Point (PEP)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ KhÃ´ng xá»­ lÃ½ login, khÃ´ng verify JWT cá»¥c bá»™&lt;/p&gt;
&lt;h2 id="32-auth--security-layer--broker-gateway"&gt;3.2 Auth / Security Layer â€“ Broker Gateway
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Custom service (Node.js / Java Spring Boot / Go)&lt;/li&gt;
&lt;li&gt;CÃ³ thá»ƒ dÃ¹ng OAuth2 Proxy lÃ m ná»n táº£ng má»Ÿ rá»™ng&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Vai trÃ²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Login endpoint&lt;/li&gt;
&lt;li&gt;Verify JWT&lt;/li&gt;
&lt;li&gt;Issue JWT cho há»‡ thá»‘ng&lt;/li&gt;
&lt;li&gt;LÃ m IdP Facade&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Endpoints Ä‘iá»ƒn hÃ¬nh&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;POST /auth/login
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;POST /auth/verify
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;POST /auth/refresh
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Khi login&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Nháº­n request tá»« Gateway&lt;/li&gt;
&lt;li&gt;Gá»i sang Identity Provider&lt;/li&gt;
&lt;li&gt;Láº¥y user info tá»« User Service&lt;/li&gt;
&lt;li&gt;Gá»i Policy Service Ä‘á»ƒ resolve permission&lt;/li&gt;
&lt;li&gt;Issue JWT (access + refresh)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Khi verify&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Verify signature + expiry&lt;/li&gt;
&lt;li&gt;Validate claim&lt;/li&gt;
&lt;li&gt;Enrich context:
&lt;ul&gt;
&lt;li&gt;user_id&lt;/li&gt;
&lt;li&gt;roles&lt;/li&gt;
&lt;li&gt;permissions&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Tráº£ header vá» cho Gateway&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ‘‰ Broker = &lt;strong&gt;Security Control Plane + Identity Facade&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="33-identity-provider--quáº£n-lÃ½-danh-tÃ­nh"&gt;3.3 Identity Provider â€“ Quáº£n lÃ½ danh tÃ­nh
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Keycloak&lt;/li&gt;
&lt;li&gt;Casdoor&lt;/li&gt;
&lt;li&gt;Auth0 / Azure AD (enterprise)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Vai trÃ²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;XÃ¡c thá»±c danh tÃ­nh ngÆ°á»i dÃ¹ng&lt;/li&gt;
&lt;li&gt;Há»— trá»£:
&lt;ul&gt;
&lt;li&gt;Username / Password&lt;/li&gt;
&lt;li&gt;SSO&lt;/li&gt;
&lt;li&gt;Social login&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NguyÃªn táº¯c&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IdP &lt;strong&gt;khÃ´ng expose trá»±c tiáº¿p ra ngoÃ i&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Client &lt;strong&gt;khÃ´ng nÃ³i chuyá»‡n trá»±c tiáº¿p vá»›i IdP&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;Chá»‰ Broker Gateway lÃ m viá»‡c vá»›i IdP qua OAuth2 / OIDC&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ‘‰ Dá»… thay:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Keycloak â†” Casdoor&lt;/li&gt;
&lt;li&gt;On-prem â†” Cloud&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="34-internal-services--user--policy"&gt;3.4 Internal Services â€“ User &amp;amp; Policy
&lt;/h2&gt;&lt;h3 id="user-service"&gt;User Service
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spring Boot / NestJS&lt;/li&gt;
&lt;li&gt;Database ná»™i bá»™&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Chá»©c nÄƒng&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Profile ngÆ°á»i dÃ¹ng&lt;/li&gt;
&lt;li&gt;Mapping user vá»›i domain ná»™i bá»™&lt;/li&gt;
&lt;li&gt;Tráº¡ng thÃ¡i (active / blocked)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="policy--permission-service"&gt;Policy / Permission Service
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Custom RBAC / ABAC service&lt;/li&gt;
&lt;li&gt;OPA (Open Policy Agent)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Chá»©c nÄƒng&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Resolve quyá»n&lt;/li&gt;
&lt;li&gt;Ãp rule theo:
&lt;ul&gt;
&lt;li&gt;role&lt;/li&gt;
&lt;li&gt;resource&lt;/li&gt;
&lt;li&gt;context&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ğŸ‘‰ &lt;strong&gt;Chá»‰ Broker gá»i cÃ¡c service nÃ y&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ Backend khÃ´ng gá»i Ä‘á»ƒ check permission&lt;/p&gt;
&lt;h2 id="35-application-layer--backend-services"&gt;3.5 Application Layer â€“ Backend Services
&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;CÃ´ng cá»¥ vÃ­ dá»¥&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Spring Boot&lt;/li&gt;
&lt;li&gt;Node.js / NestJS&lt;/li&gt;
&lt;li&gt;Go services&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NguyÃªn táº¯c&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;KhÃ´ng xá»­ lÃ½ OAuth / JWT&lt;/li&gt;
&lt;li&gt;KhÃ´ng gá»i IdP&lt;/li&gt;
&lt;li&gt;KhÃ´ng check permission phá»©c táº¡p&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Backend nháº­n&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Header tá»« Gateway:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-fallback" data-lang="fallback"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;X-User-Id
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;X-User-Roles
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;X-User-Permissions
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;ğŸ‘‰ Backend &lt;strong&gt;security-agnostic&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ Chá»‰ táº­p trung business logic&lt;/p&gt;
&lt;pre class="mermaid"&gt;
---
config:
layout: dagre
---
flowchart TB
User[&amp;#34;ğŸ‘¤ User / Client&amp;lt;br&amp;gt;Browser / Mobile&amp;#34;]
subgraph Edge[&amp;#34;ğŸŒ Edge Layer&amp;#34;]
Traefik[&amp;#34;ğŸš¦ Traefik Gateway&amp;lt;br&amp;gt;(Routing Â· TLS Â· Middleware)&amp;#34;]
end
subgraph Auth[&amp;#34;ğŸ”‘ Auth / Identity Layer&amp;#34;]
Broker[&amp;#34;ğŸ§­ Broker Gateway&amp;lt;br&amp;gt;(Login Â· JWT Issuer Â· Verify)&amp;#34;]
IdP[&amp;#34;ğŸŸ¦ Identity Provider&amp;lt;br&amp;gt;(Keycloak / Casdoor)&amp;#34;]
end
subgraph Internal[&amp;#34;ğŸ¢ Internal Services&amp;#34;]
UserSvc[&amp;#34;ğŸ‘¥ User Service&amp;#34;]
PolicySvc[&amp;#34;ğŸ“œ Policy / Permission Service&amp;#34;]
end
subgraph Backend[&amp;#34;âš™ï¸ Application Layer&amp;#34;]
API1[&amp;#34;Service A&amp;#34;]
API2[&amp;#34;Service B&amp;#34;]
end
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LUá»’NG 1: LOGIN (1.x) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User -- &amp;#34;1.1 Login request&amp;#34; --&amp;gt; Traefik
Traefik -- &amp;#34;1.2 Route /auth/*&amp;#34; --&amp;gt; Broker
Broker -- &amp;#34;1.3 Authenticate user&amp;#34; --&amp;gt; IdP
Broker -- &amp;#34;1.4 Identity result&amp;#34; --&amp;gt; Broker
Broker -- &amp;#34;1.5 Fetch user info&amp;#34; --&amp;gt; UserSvc
Broker -- &amp;#34;1.6 Policy check&amp;#34; --&amp;gt; PolicySvc
Broker -- &amp;#34;1.7 Issue JWT&amp;#34; --&amp;gt; User
%% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ LUá»’NG 2: API REQUEST (2.x) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
User -- &amp;#34;2.1 API request + JWT&amp;#34; --&amp;gt; Traefik
Traefik -- &amp;#34;2.2 forwardAuth â†’ /auth/verify&amp;#34; --&amp;gt; Broker
Broker -- &amp;#34;2.3 Verify JWT &amp;amp; enrich context&amp;#34; --&amp;gt; Traefik
Traefik -- &amp;#34;2.4 Proxy to Service A&amp;#34; --&amp;gt; API1
Traefik -- &amp;#34;2.4 Proxy to Service B&amp;#34; --&amp;gt; API2
&lt;/pre&gt;
&lt;h2 id="káº¿t-luáº­n"&gt;Káº¿t luáº­n
&lt;/h2&gt;&lt;p&gt;BÃ i viáº¿t Ä‘Ã£ tiáº¿p cáº­n bÃ i toÃ¡n xÃ¡c thá»±c vÃ  phÃ¢n quyá»n tá»« gÃ³c nhÃ¬n kiáº¿n trÃºc, thay vÃ¬ báº¯t Ä‘áº§u tá»« cÃ´ng cá»¥ hay framework cá»¥ thá»ƒ. Báº±ng cÃ¡ch &lt;strong&gt;Ä‘Æ°a xÃ¡c thá»±c lÃªn ranh giá»›i há»‡ thá»‘ng&lt;/strong&gt;, tÃ¡ch báº¡ch rÃµ rÃ ng giá»¯a gateway, lá»›p báº£o máº­t, há»‡ thá»‘ng danh tÃ­nh vÃ  backend nghiá»‡p vá»¥, kiáº¿n trÃºc giÃºp giáº£m Ä‘Ã¡ng ká»ƒ Ä‘á»™ phá»©c táº¡p vÃ  rá»§i ro báº£o máº­t trong há»‡ thá»‘ng phÃ¢n tÃ¡n.&lt;/p&gt;
&lt;p&gt;Viá»‡c sá»­ dá»¥ng &lt;strong&gt;Identity Broker&lt;/strong&gt; nhÆ° má»™t lá»›p trung gian cho phÃ©p há»‡ thá»‘ng linh hoáº¡t trong viá»‡c thay Ä‘á»•i hoáº·c má»Ÿ rá»™ng nhÃ  cung cáº¥p danh tÃ­nh, Ä‘á»“ng thá»i trÃ¡nh phá»¥ thuá»™c cháº·t vÃ o má»™t giáº£i phÃ¡p xÃ¡c thá»±c duy nháº¥t. Backend trá»Ÿ nÃªn Ä‘Æ¡n giáº£n hÆ¡n khi khÃ´ng cáº§n xá»­ lÃ½ OAuth hay JWT, tá»« Ä‘Ã³ táº­p trung hoÃ n toÃ n vÃ o logic nghiá»‡p vá»¥.&lt;/p&gt;
&lt;p&gt;Kiáº¿n trÃºc nÃ y khÃ´ng nháº±m thay tháº¿ cÃ¡c cÃ´ng cá»¥ xÃ¡c thá»±c hiá»‡n cÃ³, mÃ  cung cáº¥p má»™t &lt;strong&gt;khung tÆ° duy thiáº¿t káº¿&lt;/strong&gt; giÃºp sá»­ dá»¥ng chÃºng Ä‘Ãºng chá»—, Ä‘Ãºng vai trÃ². Khi há»‡ thá»‘ng phÃ¡t triá»ƒn vá» quy mÃ´, sá»‘ lÆ°á»£ng dá»‹ch vá»¥ vÃ  yÃªu cáº§u báº£o máº­t, cÃ¡ch tiáº¿p cáº­n nÃ y cho phÃ©p má»Ÿ rá»™ng má»™t cÃ¡ch cÃ³ kiá»ƒm soÃ¡t mÃ  khÃ´ng lÃ m xÃ¡o trá»™n toÃ n bá»™ kiáº¿n trÃºc.&lt;/p&gt;
&lt;p&gt;Cuá»‘i cÃ¹ng, giÃ¡ trá»‹ lá»›n nháº¥t cá»§a giáº£i phÃ¡p khÃ´ng náº±m á»Ÿ viá»‡c chá»n Ä‘Ãºng cÃ´ng cá»¥, mÃ  á»Ÿ viá»‡c &lt;strong&gt;Ä‘áº·t Ä‘Ãºng ranh giá»›i kiáº¿n trÃºc ngay tá»« Ä‘áº§u&lt;/strong&gt; â€” ná»n táº£ng quan trá»ng Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c há»‡ thá»‘ng an toÃ n, linh hoáº¡t vÃ  bá»n vá»¯ng trong dÃ i háº¡n.&lt;/p&gt;</description></item><item><title>Golang Module Design: Simplifying Struct and Interface Reuse</title><link>https://phongthien99.github.io/posts/golang-module-design-simplifying-struct-and-interface-reuse/</link><pubDate>Sun, 24 Aug 2025 01:17:00 +0800</pubDate><guid>https://phongthien99.github.io/posts/golang-module-design-simplifying-struct-and-interface-reuse/</guid><description>&lt;h3 id="1-Ä‘áº·t-váº¥n-Ä‘á»"&gt;1. Äáº·t váº¥n Ä‘á»
&lt;/h3&gt;&lt;p&gt;Trong cÃ¡c dá»± Ã¡n Golang lá»›n, thÆ°á»ng gáº·p tÃ¬nh huá»‘ng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Module má»›i cáº§n sá»­ dá»¥ng má»™t &lt;strong&gt;struct&lt;/strong&gt; hoáº·c &lt;strong&gt;interface&lt;/strong&gt; Ä‘Ã£ tá»“n táº¡i trong module cÅ©.&lt;/li&gt;
&lt;li&gt;Náº¿u import trá»±c tiáº¿p module cÅ©: module má»›i sáº½ phá»¥ thuá»™c máº¡nh vÃ o module cÅ© â†’ &lt;strong&gt;tight coupling&lt;/strong&gt;, khÃ³ báº£o trÃ¬.&lt;/li&gt;
&lt;li&gt;Náº¿u di chuyá»ƒn struct/interface vÃ o &lt;strong&gt;shared module&lt;/strong&gt;: pháº£i sá»­a code cÅ© â†’ dá»… gÃ¢y rá»§i ro phÃ¡ vá»¡ logic Ä‘Ã£ á»•n Ä‘á»‹nh.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CÃ¢u há»i Ä‘áº·t ra:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;LÃ m sao Ä‘á»ƒ module má»›i dÃ¹ng láº¡i struct vÃ  interface cá»§a module cÅ© thÃ´ng qua má»™t shared module, mÃ  khÃ´ng thay Ä‘á»•i code cÅ©, Ä‘á»“ng thá»i giáº£m phá»©c táº¡p vÃ  dá»… maintain?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="2-giáº£i-phÃ¡p-type-alias-trong-shared-module"&gt;2. Giáº£i phÃ¡p: Type Alias trong Shared Module
&lt;/h3&gt;&lt;p&gt;Golang há»— trá»£ &lt;strong&gt;type alias&lt;/strong&gt;, cho phÃ©p táº¡o &lt;strong&gt;bÃ­ danh&lt;/strong&gt; cho struct hoáº·c interface tá»« module cÅ©. Káº¿t há»£p vá»›i shared module, ta cÃ³ thá»ƒ giáº£i quyáº¿t váº¥n Ä‘á»:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// shared/types.go&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;package&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;shared&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;oldmodule&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;project/module_old&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// Alias cho struct&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;oldmodule&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// Alias cho interface&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;type&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;UserRepository&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;oldmodule&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UserRepository&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Module má»›i chá»‰ cáº§n import &lt;code&gt;shared&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;span class="lnt"&gt;7
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;project/shared&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;UseSharedTypes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;repo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;shared&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;UserRepository&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kd"&gt;var&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;shared&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;Name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;#34;Alice&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nf"&gt;Save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;u&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Gá»i phÆ°Æ¡ng thá»©c qua interface alias&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Lá»£i Ã­ch:&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;Module má»›i &lt;strong&gt;khÃ´ng cáº§n biáº¿t module cÅ©&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Code cÅ© &lt;strong&gt;khÃ´ng bá»‹ áº£nh hÆ°á»Ÿng&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;Náº¿u struct/interface gá»‘c thay Ä‘á»•i tÃªn hoáº·c di chuyá»ƒn, chá»‰ cáº§n cáº­p nháº­t alias trong shared module.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CÃ³ thá»ƒ má»Ÿ rá»™ng báº±ng wrapper function:&lt;/strong&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-go" data-lang="go"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;func&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;NewUser&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;string&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;shared&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;shared&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;User&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="nx"&gt;Name&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;name&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;GiÃºp module má»›i thÃªm logic khá»Ÿi táº¡o object mÃ  khÃ´ng sá»­a module cÅ©.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="3-giáº£n-hÃ³a-sá»±-phá»©c-táº¡p"&gt;3. Giáº£n hÃ³a sá»± phá»©c táº¡p
&lt;/h3&gt;&lt;p&gt;Sá»­ dá»¥ng alias cho &lt;strong&gt;struct vÃ  interface&lt;/strong&gt; giÃºp:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Giáº£m phá»¥ thuá»™c trá»±c tiáº¿p&lt;/strong&gt; giá»¯a module má»›i vÃ  module cÅ© â†’ trÃ¡nh tight coupling.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dá»… dÃ ng refactor hoáº·c má»Ÿ rá»™ng&lt;/strong&gt; â†’ thay Ä‘á»•i struct/interface gá»‘c chá»‰ cáº§n sá»­a alias trong shared module.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Chuáº©n hÃ³a truy cáº­p cÃ¡c type chung&lt;/strong&gt; â†’ developer dá»… nhÃ¬n, maintain hÆ¡n.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Giáº£m code láº·p láº¡i&lt;/strong&gt;, trÃ¡nh copy/paste struct hoáº·c interface.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Nhá» Ä‘Ã³, module má»›i cÃ³ thá»ƒ dÃ¹ng láº¡i cáº£ struct láº«n interface cÅ© má»™t cÃ¡ch &lt;strong&gt;an toÃ n, rÃµ rÃ ng vÃ  linh hoáº¡t&lt;/strong&gt;.&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="4-tuÃ¢n-thá»§-vÃ -vi-pháº¡m-nguyÃªn-táº¯c"&gt;4. TuÃ¢n thá»§ vÃ  vi pháº¡m nguyÃªn táº¯c
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;TuÃ¢n thá»§:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;DRY (Don&amp;rsquo;t Repeat Yourself):&lt;/strong&gt; TrÃ¡nh copy struct/interface, tÃ¡i sá»­ dá»¥ng thÃ´ng qua alias.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Encapsulation &amp;amp; Separation of Concerns:&lt;/strong&gt; Module má»›i khÃ´ng cáº§n biáº¿t chi tiáº¿t module cÅ©.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Maintainability:&lt;/strong&gt; Thay Ä‘á»•i struct/interface gá»‘c khÃ´ng phÃ¡ vá»¡ module má»›i.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;CÃ³ thá»ƒ vi pháº¡m:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Leak abstraction:&lt;/strong&gt; Alias quÃ¡ nhiá»u hoáº·c khÃ´ng rÃµ rÃ ng â†’ dá»… nháº§m láº«n giá»¯a alias vÃ  struct/interface gá»‘c.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Single Responsibility Principle (SRP):&lt;/strong&gt; Shared module chá»©a quÃ¡ nhiá»u alias â†’ module trá»Ÿ nÃªn â€œquÃ¡ táº£iâ€.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Overuse:&lt;/strong&gt; Láº¡m dá»¥ng alias cho má»i struct/interface â†’ giáº£m readability, khÃ³ trace code.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="5-káº¿t-luáº­n"&gt;5. Káº¿t luáº­n
&lt;/h3&gt;&lt;p&gt;Sá»­ dá»¥ng &lt;strong&gt;type alias trong shared module cho cáº£ struct vÃ  interface&lt;/strong&gt; lÃ  má»™t giáº£i phÃ¡p hiá»‡u quáº£ Ä‘á»ƒ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cho phÃ©p module má»›i &lt;strong&gt;sá»­ dá»¥ng struct vÃ  interface cá»§a module cÅ©&lt;/strong&gt; mÃ  khÃ´ng phÃ¡ vá»¡ code hiá»‡n táº¡i.&lt;/li&gt;
&lt;li&gt;Giáº£m sá»± &lt;strong&gt;phá»©c táº¡p trong quáº£n lÃ½ module&lt;/strong&gt;, chuáº©n hÃ³a Ä‘iá»ƒm truy cáº­p cÃ¡c type chung.&lt;/li&gt;
&lt;li&gt;Duy trÃ¬ &lt;strong&gt;tÃ­nh maintainable vÃ  má»Ÿ rá»™ng Ä‘Æ°á»£c dá»± Ã¡n&lt;/strong&gt;, Ä‘á»“ng thá»i tuÃ¢n thá»§ nhiá»u nguyÃªn táº¯c cÆ¡ báº£n cá»§a láº­p trÃ¬nh module.&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>