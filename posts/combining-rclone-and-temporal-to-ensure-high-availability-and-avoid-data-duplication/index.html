<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication Äáº·t Váº¥n Äá» Trong má»™t há»‡ thá»‘ng cáº§n Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (High Availability - HA), báº¡n cÃ³ ba mÃ¡y chá»§ hoáº¡t Ä‘á»™ng trong má»™t cá»¥m. CÃ¡c mÃ¡y chá»§ nÃ y cÃ¹ng chia sáº» má»™t volume lÆ°u trá»¯ dá»¯ liá»‡u chung. YÃªu cáº§u cá»§a há»‡ thá»‘ng lÃ  pháº£i Ä‘á»“ng bá»™ dá»¯ liá»‡u tá»« volume chia sáº» nÃ y lÃªn nhiá»u há»‡ lÆ°u trá»¯ khÃ¡c nhau nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP.\n"><title>Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication"</title><link rel=canonical href=https://phongthien99.github.io/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/><link rel=stylesheet href=/scss/style.min.769133d016a4a1944b3a27800e000cccd439a8c1a9c0c61f7c4fa0bc0e42de57.css><meta property='og:title' content="Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication\" "><meta property='og:description' content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication Äáº·t Váº¥n Äá» Trong má»™t há»‡ thá»‘ng cáº§n Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (High Availability - HA), báº¡n cÃ³ ba mÃ¡y chá»§ hoáº¡t Ä‘á»™ng trong má»™t cá»¥m. CÃ¡c mÃ¡y chá»§ nÃ y cÃ¹ng chia sáº» má»™t volume lÆ°u trá»¯ dá»¯ liá»‡u chung. YÃªu cáº§u cá»§a há»‡ thá»‘ng lÃ  pháº£i Ä‘á»“ng bá»™ dá»¯ liá»‡u tá»« volume chia sáº» nÃ y lÃªn nhiá»u há»‡ lÆ°u trá»¯ khÃ¡c nhau nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP.\n"><meta property='og:url' content='https://phongthien99.github.io/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/'><meta property='og:site_name' content='phongthien'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='temporal'><meta property='article:tag' content='rclone'><meta property='article:published_time' content='2024-09-07T00:40:00+08:00'><meta property='article:modified_time' content='2024-09-07T00:40:00+08:00'><meta name=twitter:title content="Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication\" "><meta name=twitter:description content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication Äáº·t Váº¥n Äá» Trong má»™t há»‡ thá»‘ng cáº§n Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (High Availability - HA), báº¡n cÃ³ ba mÃ¡y chá»§ hoáº¡t Ä‘á»™ng trong má»™t cá»¥m. CÃ¡c mÃ¡y chá»§ nÃ y cÃ¹ng chia sáº» má»™t volume lÆ°u trá»¯ dá»¯ liá»‡u chung. YÃªu cáº§u cá»§a há»‡ thá»‘ng lÃ  pháº£i Ä‘á»“ng bá»™ dá»¯ liá»‡u tá»« volume chia sáº» nÃ y lÃªn nhiá»u há»‡ lÆ°u trá»¯ khÃ¡c nhau nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP.\n"><link rel="shortcut icon" href=/favicon.png><script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_7ee69f593e8680d3.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ…</span></figure><div class=site-meta><h1 class=site-name><a href=/>phongthien</a></h1><h2 class=site-description>Software Engineer</h2></div></header><ol class=menu-social><li><a href=https://github.com/phongthien99 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=linkedin rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about-me/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About me</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#Ä‘áº·t-váº¥n-Ä‘á»>Äáº·t Váº¥n Äá»</a></li></ol></li><li><a href=#giáº£i-phÃ¡p>Giáº£i phÃ¡p</a><ol><li><a href=#1-rclone-cÃ´ng-cá»¥-Ä‘á»“ng-bá»™-dá»¯-liá»‡u-linh-hoáº¡t>1. <strong>Rclone: CÃ´ng Cá»¥ Äá»“ng Bá»™ Dá»¯ Liá»‡u Linh Hoáº¡t</strong></a></li><li><a href=#2-temporal-há»‡-thá»‘ng-quáº£n-lÃ½-workflow-Ä‘áº£m-báº£o-ha>2. <strong>Temporal: Há»‡ Thá»‘ng Quáº£n LÃ½ Workflow Äáº£m Báº£o HA</strong></a></li></ol></li><li><a href=#thá»±c-hiá»‡n>Thá»±c hiá»‡n</a><ol><li><a href=#bÆ°á»›c-1-thiáº¿t-láº­p-cÆ¡-sá»Ÿ-dá»¯-liá»‡u-sql-chung>BÆ°á»›c 1: Thiáº¿t láº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u SQL chung</a></li><li><a href=#bÆ°á»›c-2-cÃ i-Ä‘áº·t-temporal-trÃªn-3-server>BÆ°á»›c 2: CÃ i Ä‘áº·t Temporal trÃªn 3 server</a></li><li><a href=#bÆ°á»›c-3-cÃ i-Ä‘áº·t-vÃ -cáº¥u-hÃ¬nh-worker>BÆ°á»›c 3: CÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh Worker</a></li><li><a href=#bÆ°á»›c-4-quáº£n-lÃ½-Ä‘á»“ng-bá»™-vÃ -ha>BÆ°á»›c 4: Quáº£n lÃ½ Ä‘á»“ng bá»™ vÃ  HA</a></li><li><a href=#bÆ°á»›c-5-cháº¡y-vÃ -kiá»ƒm-tra>BÆ°á»›c 5: Cháº¡y vÃ  kiá»ƒm tra</a></li></ol></li><li><a href=#káº¿t-luáº­n>Káº¿t Luáº­n</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/backup/>Backup</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/>Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication"</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2024-09-07T00:40:00+08:00>Sep 07, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h1 id=building-an-efficient-data-synchronization-system-combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication>Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication</h1><h3 id=Ä‘áº·t-váº¥n-Ä‘á»>Äáº·t Váº¥n Äá»</h3><p>Trong má»™t há»‡ thá»‘ng cáº§n Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (High Availability - HA), báº¡n cÃ³ ba mÃ¡y chá»§ hoáº¡t Ä‘á»™ng trong má»™t cá»¥m. CÃ¡c mÃ¡y chá»§ nÃ y cÃ¹ng chia sáº» má»™t volume lÆ°u trá»¯ dá»¯ liá»‡u chung. YÃªu cáº§u cá»§a há»‡ thá»‘ng lÃ  pháº£i Ä‘á»“ng bá»™ dá»¯ liá»‡u tá»« volume chia sáº» nÃ y lÃªn nhiá»u há»‡ lÆ°u trá»¯ khÃ¡c nhau nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP.</p><p>Tuy nhiÃªn, viá»‡c Ä‘áº£m báº£o Ä‘á»“ng bá»™ dá»¯ liá»‡u lÃªn cÃ¡c há»‡ lÆ°u trá»¯ nÃ y mÃ  váº«n giá»¯ Ä‘Æ°á»£c tÃ­nh HA vÃ  trÃ¡nh trÃ¹ng láº·p dá»¯ liá»‡u láº¡i Ä‘áº·t ra má»™t thÃ¡ch thá»©c khÃ´ng nhá».</p><ol><li><strong>Triá»ƒn khai cron job trÃªn má»™t mÃ¡y chá»§ duy nháº¥t</strong>: Náº¿u báº¡n chá»n má»™t mÃ¡y chá»§ duy nháº¥t Ä‘á»ƒ thá»±c hiá»‡n Ä‘á»“ng bá»™ hÃ³a báº±ng cÃ¡ch sá»­ dá»¥ng cron job, há»‡ thá»‘ng sáº½ gáº·p rá»§i ro náº¿u mÃ¡y chá»§ nÃ y gáº·p sá»± cá»‘. Trong trÆ°á»ng há»£p Ä‘Ã³, viá»‡c Ä‘á»“ng bá»™ dá»¯ liá»‡u sáº½ bá»‹ giÃ¡n Ä‘oáº¡n, dáº«n Ä‘áº¿n kháº£ nÄƒng máº¥t mÃ¡t dá»¯ liá»‡u.</li><li><strong>Triá»ƒn khai cron job trÃªn nhiá»u mÃ¡y chá»§</strong>: Äá»ƒ Ä‘áº£m báº£o tÃ­nh HA, náº¿u báº¡n triá»ƒn khai cron job trÃªn cáº£ ba mÃ¡y chá»§, cÃ³ kháº£ nÄƒng cáº£ ba mÃ¡y chá»§ sáº½ thá»±c hiá»‡n Ä‘á»“ng bá»™ cÃ¹ng má»™t lÃºc. Äiá»u nÃ y dáº«n Ä‘áº¿n viá»‡c dá»¯ liá»‡u bá»‹ Ä‘á»“ng bá»™ nhiá»u láº§n lÃªn cÃ¡c há»‡ lÆ°u trá»¯ khÃ¡c nhau, gÃ¢y ra sá»± trÃ¹ng láº·p dá»¯ liá»‡u. Há»‡ quáº£ lÃ  lÃ£ng phÃ­ bÄƒng thÃ´ng vÃ  lÃ m phá»©c táº¡p hÃ³a viá»‡c quáº£n lÃ½ dá»¯ liá»‡u trÃªn cÃ¡c há»‡ lÆ°u trá»¯.</li></ol><p>NhÆ° váº­y, há»‡ thá»‘ng cáº§n má»™t giáº£i phÃ¡p cÃ³ thá»ƒ vá»«a Ä‘áº£m báº£o Ä‘á»“ng bá»™ dá»¯ liá»‡u lÃªn cÃ¡c há»‡ lÆ°u trá»¯ má»™t cÃ¡ch nháº¥t quÃ¡n, vá»«a trÃ¡nh Ä‘Æ°á»£c viá»‡c dá»¯ liá»‡u bá»‹ trÃ¹ng láº·p, Ä‘á»“ng thá»i váº«n giá»¯ Ä‘Æ°á»£c tÃ­nh sáºµn sÃ ng cao trong trÆ°á»ng há»£p cÃ³ sá»± cá»‘ xáº£y ra</p><h2 id=giáº£i-phÃ¡p>Giáº£i phÃ¡p</h2><p>Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (HA) vÃ  trÃ¡nh trÃ¹ng láº·p dá»¯ liá»‡u khi Ä‘á»“ng bá»™ tá»« 3 mÃ¡y chá»§ chia sáº» volume lÃªn cÃ¡c há»‡ lÆ°u trá»¯ nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP, chÃºng ta cÃ³ thá»ƒ káº¿t há»£p Rclone vá»›i Temporal. ÄÃ¢y lÃ  giáº£i phÃ¡p khÃ´ng chá»‰ tá»‘i Æ°u hÃ³a quÃ¡ trÃ¬nh Ä‘á»“ng bá»™ mÃ  cÃ²n giÃºp quáº£n lÃ½ hiá»‡u quáº£ vÃ  tá»± Ä‘á»™ng hÃ³a quy trÃ¬nh..</p><h3 id=1-rclone-cÃ´ng-cá»¥-Ä‘á»“ng-bá»™-dá»¯-liá»‡u-linh-hoáº¡t>1. <strong>Rclone: CÃ´ng Cá»¥ Äá»“ng Bá»™ Dá»¯ Liá»‡u Linh Hoáº¡t</strong></h3><p>Rclone lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ Ä‘á»“ng bá»™ hÃ³a dá»¯ liá»‡u giá»¯a nhiá»u há»‡ lÆ°u trá»¯ Ä‘Ã¡m mÃ¢y vÃ  mÃ¡y chá»§ cá»¥c bá»™. Rclone há»— trá»£ nhiá»u giao thá»©c vÃ  dá»‹ch vá»¥ lÆ°u trá»¯ khÃ¡c nhau nhÆ° AWS S3, Google Cloud Storage, FTP, vÃ  nhiá»u dá»‹ch vá»¥ khÃ¡c. Äáº·c biá»‡t, nÃ³ há»— trá»£ cÃ¡c tÃ­nh nÄƒng nhÆ°:</p><ul><li><strong>Äá»“ng bá»™ hÃ³a dá»¯ liá»‡u tá»« volume chia sáº» lÃªn nhiá»u há»‡ lÆ°u trá»¯</strong>.</li><li><strong>Kiá»ƒm tra sá»± khÃ¡c biá»‡t cá»§a dá»¯ liá»‡u</strong> trÆ°á»›c khi Ä‘á»“ng bá»™ Ä‘á»ƒ trÃ¡nh táº£i lÃªn cÃ¡c dá»¯ liá»‡u khÃ´ng cáº§n thiáº¿t.</li><li><strong>Há»— trá»£ nÃ©n vÃ  mÃ£ hÃ³a dá»¯ liá»‡u</strong> khi cáº§n thiáº¿t.</li></ul><h3 id=2-temporal-há»‡-thá»‘ng-quáº£n-lÃ½-workflow-Ä‘áº£m-báº£o-ha>2. <strong>Temporal: Há»‡ Thá»‘ng Quáº£n LÃ½ Workflow Äáº£m Báº£o HA</strong></h3><p>Temporal lÃ  má»™t há»‡ thá»‘ng quáº£n lÃ½ workflow giÃºp báº¡n Ä‘iá»u phá»‘i cÃ¡c quy trÃ¬nh phá»©c táº¡p trong mÃ´i trÆ°á»ng phÃ¢n tÃ¡n. Vá»›i Temporal, báº¡n cÃ³ thá»ƒ Ä‘áº£m báº£o ráº±ng cÃ¡c tÃ¡c vá»¥ Ä‘á»“ng bá»™ dá»¯ liá»‡u chá»‰ Ä‘Æ°á»£c thá»±c hiá»‡n bá»Ÿi má»™t mÃ¡y chá»§ táº¡i má»™t thá»i Ä‘iá»ƒm nháº¥t Ä‘á»‹nh, vÃ  khi mÃ¡y chá»§ Ä‘Ã³ gáº·p sá»± cá»‘, má»™t mÃ¡y chá»§ khÃ¡c sáº½ tá»± Ä‘á»™ng tiáº¿p quáº£n quÃ¡ trÃ¬nh Ä‘á»“ng bá»™. Temporal giÃºp giáº£i quyáº¿t cÃ¡c váº¥n Ä‘á» liÃªn quan Ä‘áº¿n tÃ­nh HA vÃ  trÃ¡nh trÃ¹ng láº·p dá»¯ liá»‡u báº±ng cÃ¡ch:</p><ul><li><strong>Quáº£n lÃ½ tráº¡ng thÃ¡i</strong>: Temporal giá»¯ tráº¡ng thÃ¡i cá»§a cÃ¡c workflow vÃ  Ä‘áº£m báº£o chá»‰ cÃ³ má»™t instance cá»§a workflow Ä‘ang cháº¡y táº¡i má»™t thá»i Ä‘iá»ƒm.</li><li><strong>Failover tá»± Ä‘á»™ng</strong>: Náº¿u mÃ¡y chá»§ Ä‘ang thá»±c hiá»‡n workflow gáº·p sá»± cá»‘, Temporal sáº½ tá»± Ä‘á»™ng chuyá»ƒn trÃ¡ch nhiá»‡m sang má»™t mÃ¡y chá»§ khÃ¡c.</li></ul><h2 id=thá»±c-hiá»‡n>Thá»±c hiá»‡n</h2><h3 id=bÆ°á»›c-1-thiáº¿t-láº­p-cÆ¡-sá»Ÿ-dá»¯-liá»‡u-sql-chung>BÆ°á»›c 1: Thiáº¿t láº­p cÆ¡ sá»Ÿ dá»¯ liá»‡u SQL chung</h3><ul><li>CÃ i Ä‘áº·t MySQL/PostgreSQL.</li><li>Táº¡o báº£ng Temporal vÃ  cáº¥u hÃ¬nh Temporal server káº¿t ná»‘i Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u nÃ y.</li></ul><h3 id=bÆ°á»›c-2-cÃ i-Ä‘áº·t-temporal-trÃªn-3-server>BÆ°á»›c 2: CÃ i Ä‘áº·t Temporal trÃªn 3 server</h3><ul><li>Táº£i Temporal server trÃªn má»—i server.</li><li>Cáº¥u hÃ¬nh Temporal Ä‘á»ƒ káº¿t ná»‘i Ä‘áº¿n cÆ¡ sá»Ÿ dá»¯ liá»‡u SQL chung.</li></ul><h3 id=bÆ°á»›c-3-cÃ i-Ä‘áº·t-vÃ -cáº¥u-hÃ¬nh-worker>BÆ°á»›c 3: CÃ i Ä‘áº·t vÃ  cáº¥u hÃ¬nh Worker</h3><ul><li>CÃ i Ä‘áº·t rclone vÃ  worker Temporal trÃªn má»—i server.</li><li>Cáº¥u hÃ¬nh worker Ä‘á»ƒ sá»­ dá»¥ng rclone Ä‘á»“ng bá»™ dá»¯ liá»‡u lÃªn S3.</li></ul><h3 id=bÆ°á»›c-4-quáº£n-lÃ½-Ä‘á»“ng-bá»™-vÃ -ha>BÆ°á»›c 4: Quáº£n lÃ½ Ä‘á»“ng bá»™ vÃ  HA</h3><ul><li>Sá»­ dá»¥ng Temporal workflow Ä‘á»ƒ quáº£n lÃ½ tiáº¿n trÃ¬nh Ä‘á»“ng bá»™, chá»‰ cho phÃ©p má»™t server Ä‘á»“ng bá»™ táº¡i má»™t thá»i Ä‘iá»ƒm.</li><li>Äáº£m báº£o tÃ­nh HA, náº¿u má»™t server gáº·p sá»± cá»‘, cÃ¡c server khÃ¡c tiáº¿p quáº£n tiáº¿n trÃ¬nh Ä‘á»“ng bá»™.</li></ul><h3 id=bÆ°á»›c-5-cháº¡y-vÃ -kiá»ƒm-tra>BÆ°á»›c 5: Cháº¡y vÃ  kiá»ƒm tra</h3><ul><li>Cháº¡y Temporal server vÃ  worker trÃªn cáº£ 3 server.</li><li>Kiá»ƒm tra tÃ­nh Ä‘á»“ng bá»™ vÃ  HA cá»§a há»‡ thá»‘ng.</li></ul><p><img src=/2024-09-06.png loading=lazy alt=image.png></p><h2 id=káº¿t-luáº­n>Káº¿t Luáº­n</h2><p>Trong viá»‡c Ä‘áº£m báº£o tÃ­nh sáºµn sÃ ng cao (HA) vÃ  trÃ¡nh trÃ¹ng láº·p dá»¯ liá»‡u khi Ä‘á»“ng bá»™ tá»« má»™t volume chia sáº» lÃªn nhiá»u há»‡ lÆ°u trá»¯ nhÆ° AWS S3, Google Cloud Storage (GCS), vÃ  FTP, viá»‡c sá»­ dá»¥ng Rclone káº¿t há»£p vá»›i Temporal mang láº¡i giáº£i phÃ¡p tá»‘i Æ°u vÃ  hiá»‡u quáº£. NgoÃ i ra chÃºng ta cÃ³ thá»ƒ thá»­ nghiá»‡m trÃªn 1 mÃ¡y duy nháº¥t báº±ng cÃ¡ch sá»­ dá»±ng temporal káº¿t há»£p vá»›i sqlite3.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/temporal/>Temporal</a>
<a href=/tags/rclone/>Rclone</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=[".main-article",".widget--toc"];e.forEach(e=>{const t=document.querySelector(e);t&&renderMathInElement(t,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})})</script></article><div class=disqus-container></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2026 phongthien</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>