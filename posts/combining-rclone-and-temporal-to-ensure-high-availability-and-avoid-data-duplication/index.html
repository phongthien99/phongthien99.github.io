<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication ƒê·∫∑t V·∫•n ƒê·ªÅ Trong m·ªôt h·ªá th·ªëng c·∫ßn ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (High Availability - HA), b·∫°n c√≥ ba m√°y ch·ªß ho·∫°t ƒë·ªông trong m·ªôt c·ª•m. C√°c m√°y ch·ªß n√†y c√πng chia s·∫ª m·ªôt volume l∆∞u tr·ªØ d·ªØ li·ªáu chung. Y√™u c·∫ßu c·ªßa h·ªá th·ªëng l√† ph·∫£i ƒë·ªìng b·ªô d·ªØ li·ªáu t·ª´ volume chia s·∫ª n√†y l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ kh√°c nhau nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP.\n"><title>Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication"</title><link rel=canonical href=https://phongthien99.github.io/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/><link rel=stylesheet href=/scss/style.min.c18fe284aee63589fdafada4da66cb687206b45e982932d39401b71fbbde3a33.css><meta property='og:title' content="Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication\" "><meta property='og:description' content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication ƒê·∫∑t V·∫•n ƒê·ªÅ Trong m·ªôt h·ªá th·ªëng c·∫ßn ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (High Availability - HA), b·∫°n c√≥ ba m√°y ch·ªß ho·∫°t ƒë·ªông trong m·ªôt c·ª•m. C√°c m√°y ch·ªß n√†y c√πng chia s·∫ª m·ªôt volume l∆∞u tr·ªØ d·ªØ li·ªáu chung. Y√™u c·∫ßu c·ªßa h·ªá th·ªëng l√† ph·∫£i ƒë·ªìng b·ªô d·ªØ li·ªáu t·ª´ volume chia s·∫ª n√†y l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ kh√°c nhau nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP.\n"><meta property='og:url' content='https://phongthien99.github.io/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/'><meta property='og:site_name' content='phongthien'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='temporal'><meta property='article:tag' content='rclone'><meta property='article:published_time' content='2024-09-07T00:40:00+08:00'><meta property='article:modified_time' content='2024-09-07T00:40:00+08:00'><meta name=twitter:title content="Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication\" "><meta name=twitter:description content="Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication ƒê·∫∑t V·∫•n ƒê·ªÅ Trong m·ªôt h·ªá th·ªëng c·∫ßn ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (High Availability - HA), b·∫°n c√≥ ba m√°y ch·ªß ho·∫°t ƒë·ªông trong m·ªôt c·ª•m. C√°c m√°y ch·ªß n√†y c√πng chia s·∫ª m·ªôt volume l∆∞u tr·ªØ d·ªØ li·ªáu chung. Y√™u c·∫ßu c·ªßa h·ªá th·ªëng l√† ph·∫£i ƒë·ªìng b·ªô d·ªØ li·ªáu t·ª´ volume chia s·∫ª n√†y l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ kh√°c nhau nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP.\n"><link rel="shortcut icon" href=/favicon.png><script src=https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_b560a5e3646929f4.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üèÖ</span></figure><div class=site-meta><h1 class=site-name><a href=/>phongthien</a></h1><h2 class=site-description>Software Engineer</h2></div></header><ol class=menu-social><li><a href=https://github.com/phongthien99 target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://twitter.com target=_blank title=linkedin rel=me><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/about-me/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About me</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><ol><li><a href=#ƒë·∫∑t-v·∫•n-ƒë·ªÅ>ƒê·∫∑t V·∫•n ƒê·ªÅ</a></li></ol></li><li><a href=#gi·∫£i-ph√°p>Gi·∫£i ph√°p</a><ol><li><a href=#1-rclone-c√¥ng-c·ª•-ƒë·ªìng-b·ªô-d·ªØ-li·ªáu-linh-ho·∫°t>1. <strong>Rclone: C√¥ng C·ª• ƒê·ªìng B·ªô D·ªØ Li·ªáu Linh Ho·∫°t</strong></a></li><li><a href=#2-temporal-h·ªá-th·ªëng-qu·∫£n-l√Ω-workflow-ƒë·∫£m-b·∫£o-ha>2. <strong>Temporal: H·ªá Th·ªëng Qu·∫£n L√Ω Workflow ƒê·∫£m B·∫£o HA</strong></a></li></ol></li><li><a href=#th·ª±c-hi·ªán>Th·ª±c hi·ªán</a><ol><li><a href=#b∆∞·ªõc-1-thi·∫øt-l·∫≠p-c∆°-s·ªü-d·ªØ-li·ªáu-sql-chung>B∆∞·ªõc 1: Thi·∫øt l·∫≠p c∆° s·ªü d·ªØ li·ªáu SQL chung</a></li><li><a href=#b∆∞·ªõc-2-c√†i-ƒë·∫∑t-temporal-tr√™n-3-server>B∆∞·ªõc 2: C√†i ƒë·∫∑t Temporal tr√™n 3 server</a></li><li><a href=#b∆∞·ªõc-3-c√†i-ƒë·∫∑t-v√†-c·∫•u-h√¨nh-worker>B∆∞·ªõc 3: C√†i ƒë·∫∑t v√† c·∫•u h√¨nh Worker</a></li><li><a href=#b∆∞·ªõc-4-qu·∫£n-l√Ω-ƒë·ªìng-b·ªô-v√†-ha>B∆∞·ªõc 4: Qu·∫£n l√Ω ƒë·ªìng b·ªô v√† HA</a></li><li><a href=#b∆∞·ªõc-5-ch·∫°y-v√†-ki·ªÉm-tra>B∆∞·ªõc 5: Ch·∫°y v√† ki·ªÉm tra</a></li></ol></li><li><a href=#k·∫øt-lu·∫≠n>K·∫øt Lu·∫≠n</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/backup/>Backup</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/posts/combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication/>Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication"</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Sep 07, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer></div></header><section class=article-content><h1 id=building-an-efficient-data-synchronization-system-combining-rclone-and-temporal-to-ensure-high-availability-and-avoid-data-duplication>Building an Efficient Data Synchronization System: Combining Rclone and Temporal to Ensure High Availability and Avoid Data Duplication</h1><h3 id=ƒë·∫∑t-v·∫•n-ƒë·ªÅ>ƒê·∫∑t V·∫•n ƒê·ªÅ</h3><p>Trong m·ªôt h·ªá th·ªëng c·∫ßn ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (High Availability - HA), b·∫°n c√≥ ba m√°y ch·ªß ho·∫°t ƒë·ªông trong m·ªôt c·ª•m. C√°c m√°y ch·ªß n√†y c√πng chia s·∫ª m·ªôt volume l∆∞u tr·ªØ d·ªØ li·ªáu chung. Y√™u c·∫ßu c·ªßa h·ªá th·ªëng l√† ph·∫£i ƒë·ªìng b·ªô d·ªØ li·ªáu t·ª´ volume chia s·∫ª n√†y l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ kh√°c nhau nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP.</p><p>Tuy nhi√™n, vi·ªác ƒë·∫£m b·∫£o ƒë·ªìng b·ªô d·ªØ li·ªáu l√™n c√°c h·ªá l∆∞u tr·ªØ n√†y m√† v·∫´n gi·ªØ ƒë∆∞·ª£c t√≠nh HA v√† tr√°nh tr√πng l·∫∑p d·ªØ li·ªáu l·∫°i ƒë·∫∑t ra m·ªôt th√°ch th·ª©c kh√¥ng nh·ªè.</p><ol><li><strong>Tri·ªÉn khai cron job tr√™n m·ªôt m√°y ch·ªß duy nh·∫•t</strong>: N·∫øu b·∫°n ch·ªçn m·ªôt m√°y ch·ªß duy nh·∫•t ƒë·ªÉ th·ª±c hi·ªán ƒë·ªìng b·ªô h√≥a b·∫±ng c√°ch s·ª≠ d·ª•ng cron job, h·ªá th·ªëng s·∫Ω g·∫∑p r·ªßi ro n·∫øu m√°y ch·ªß n√†y g·∫∑p s·ª± c·ªë. Trong tr∆∞·ªùng h·ª£p ƒë√≥, vi·ªác ƒë·ªìng b·ªô d·ªØ li·ªáu s·∫Ω b·ªã gi√°n ƒëo·∫°n, d·∫´n ƒë·∫øn kh·∫£ nƒÉng m·∫•t m√°t d·ªØ li·ªáu.</li><li><strong>Tri·ªÉn khai cron job tr√™n nhi·ªÅu m√°y ch·ªß</strong>: ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh HA, n·∫øu b·∫°n tri·ªÉn khai cron job tr√™n c·∫£ ba m√°y ch·ªß, c√≥ kh·∫£ nƒÉng c·∫£ ba m√°y ch·ªß s·∫Ω th·ª±c hi·ªán ƒë·ªìng b·ªô c√πng m·ªôt l√∫c. ƒêi·ªÅu n√†y d·∫´n ƒë·∫øn vi·ªác d·ªØ li·ªáu b·ªã ƒë·ªìng b·ªô nhi·ªÅu l·∫ßn l√™n c√°c h·ªá l∆∞u tr·ªØ kh√°c nhau, g√¢y ra s·ª± tr√πng l·∫∑p d·ªØ li·ªáu. H·ªá qu·∫£ l√† l√£ng ph√≠ bƒÉng th√¥ng v√† l√†m ph·ª©c t·∫°p h√≥a vi·ªác qu·∫£n l√Ω d·ªØ li·ªáu tr√™n c√°c h·ªá l∆∞u tr·ªØ.</li></ol><p>Nh∆∞ v·∫≠y, h·ªá th·ªëng c·∫ßn m·ªôt gi·∫£i ph√°p c√≥ th·ªÉ v·ª´a ƒë·∫£m b·∫£o ƒë·ªìng b·ªô d·ªØ li·ªáu l√™n c√°c h·ªá l∆∞u tr·ªØ m·ªôt c√°ch nh·∫•t qu√°n, v·ª´a tr√°nh ƒë∆∞·ª£c vi·ªác d·ªØ li·ªáu b·ªã tr√πng l·∫∑p, ƒë·ªìng th·ªùi v·∫´n gi·ªØ ƒë∆∞·ª£c t√≠nh s·∫µn s√†ng cao trong tr∆∞·ªùng h·ª£p c√≥ s·ª± c·ªë x·∫£y ra</p><h2 id=gi·∫£i-ph√°p>Gi·∫£i ph√°p</h2><p>ƒê·ªÉ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (HA) v√† tr√°nh tr√πng l·∫∑p d·ªØ li·ªáu khi ƒë·ªìng b·ªô t·ª´ 3 m√°y ch·ªß chia s·∫ª volume l√™n c√°c h·ªá l∆∞u tr·ªØ nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP, ch√∫ng ta c√≥ th·ªÉ k·∫øt h·ª£p Rclone v·ªõi Temporal. ƒê√¢y l√† gi·∫£i ph√°p kh√¥ng ch·ªâ t·ªëi ∆∞u h√≥a qu√° tr√¨nh ƒë·ªìng b·ªô m√† c√≤n gi√∫p qu·∫£n l√Ω hi·ªáu qu·∫£ v√† t·ª± ƒë·ªông h√≥a quy tr√¨nh..</p><h3 id=1-rclone-c√¥ng-c·ª•-ƒë·ªìng-b·ªô-d·ªØ-li·ªáu-linh-ho·∫°t>1. <strong>Rclone: C√¥ng C·ª• ƒê·ªìng B·ªô D·ªØ Li·ªáu Linh Ho·∫°t</strong></h3><p>Rclone l√† m·ªôt c√¥ng c·ª• m·∫°nh m·∫Ω ƒë·ªÉ ƒë·ªìng b·ªô h√≥a d·ªØ li·ªáu gi·ªØa nhi·ªÅu h·ªá l∆∞u tr·ªØ ƒë√°m m√¢y v√† m√°y ch·ªß c·ª•c b·ªô. Rclone h·ªó tr·ª£ nhi·ªÅu giao th·ª©c v√† d·ªãch v·ª• l∆∞u tr·ªØ kh√°c nhau nh∆∞ AWS S3, Google Cloud Storage, FTP, v√† nhi·ªÅu d·ªãch v·ª• kh√°c. ƒê·∫∑c bi·ªát, n√≥ h·ªó tr·ª£ c√°c t√≠nh nƒÉng nh∆∞:</p><ul><li><strong>ƒê·ªìng b·ªô h√≥a d·ªØ li·ªáu t·ª´ volume chia s·∫ª l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ</strong>.</li><li><strong>Ki·ªÉm tra s·ª± kh√°c bi·ªát c·ªßa d·ªØ li·ªáu</strong> tr∆∞·ªõc khi ƒë·ªìng b·ªô ƒë·ªÉ tr√°nh t·∫£i l√™n c√°c d·ªØ li·ªáu kh√¥ng c·∫ßn thi·∫øt.</li><li><strong>H·ªó tr·ª£ n√©n v√† m√£ h√≥a d·ªØ li·ªáu</strong> khi c·∫ßn thi·∫øt.</li></ul><h3 id=2-temporal-h·ªá-th·ªëng-qu·∫£n-l√Ω-workflow-ƒë·∫£m-b·∫£o-ha>2. <strong>Temporal: H·ªá Th·ªëng Qu·∫£n L√Ω Workflow ƒê·∫£m B·∫£o HA</strong></h3><p>Temporal l√† m·ªôt h·ªá th·ªëng qu·∫£n l√Ω workflow gi√∫p b·∫°n ƒëi·ªÅu ph·ªëi c√°c quy tr√¨nh ph·ª©c t·∫°p trong m√¥i tr∆∞·ªùng ph√¢n t√°n. V·ªõi Temporal, b·∫°n c√≥ th·ªÉ ƒë·∫£m b·∫£o r·∫±ng c√°c t√°c v·ª• ƒë·ªìng b·ªô d·ªØ li·ªáu ch·ªâ ƒë∆∞·ª£c th·ª±c hi·ªán b·ªüi m·ªôt m√°y ch·ªß t·∫°i m·ªôt th·ªùi ƒëi·ªÉm nh·∫•t ƒë·ªãnh, v√† khi m√°y ch·ªß ƒë√≥ g·∫∑p s·ª± c·ªë, m·ªôt m√°y ch·ªß kh√°c s·∫Ω t·ª± ƒë·ªông ti·∫øp qu·∫£n qu√° tr√¨nh ƒë·ªìng b·ªô. Temporal gi√∫p gi·∫£i quy·∫øt c√°c v·∫•n ƒë·ªÅ li√™n quan ƒë·∫øn t√≠nh HA v√† tr√°nh tr√πng l·∫∑p d·ªØ li·ªáu b·∫±ng c√°ch:</p><ul><li><strong>Qu·∫£n l√Ω tr·∫°ng th√°i</strong>: Temporal gi·ªØ tr·∫°ng th√°i c·ªßa c√°c workflow v√† ƒë·∫£m b·∫£o ch·ªâ c√≥ m·ªôt instance c·ªßa workflow ƒëang ch·∫°y t·∫°i m·ªôt th·ªùi ƒëi·ªÉm.</li><li><strong>Failover t·ª± ƒë·ªông</strong>: N·∫øu m√°y ch·ªß ƒëang th·ª±c hi·ªán workflow g·∫∑p s·ª± c·ªë, Temporal s·∫Ω t·ª± ƒë·ªông chuy·ªÉn tr√°ch nhi·ªám sang m·ªôt m√°y ch·ªß kh√°c.</li></ul><h2 id=th·ª±c-hi·ªán>Th·ª±c hi·ªán</h2><h3 id=b∆∞·ªõc-1-thi·∫øt-l·∫≠p-c∆°-s·ªü-d·ªØ-li·ªáu-sql-chung>B∆∞·ªõc 1: Thi·∫øt l·∫≠p c∆° s·ªü d·ªØ li·ªáu SQL chung</h3><ul><li>C√†i ƒë·∫∑t MySQL/PostgreSQL.</li><li>T·∫°o b·∫£ng Temporal v√† c·∫•u h√¨nh Temporal server k·∫øt n·ªëi ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu n√†y.</li></ul><h3 id=b∆∞·ªõc-2-c√†i-ƒë·∫∑t-temporal-tr√™n-3-server>B∆∞·ªõc 2: C√†i ƒë·∫∑t Temporal tr√™n 3 server</h3><ul><li>T·∫£i Temporal server tr√™n m·ªói server.</li><li>C·∫•u h√¨nh Temporal ƒë·ªÉ k·∫øt n·ªëi ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu SQL chung.</li></ul><h3 id=b∆∞·ªõc-3-c√†i-ƒë·∫∑t-v√†-c·∫•u-h√¨nh-worker>B∆∞·ªõc 3: C√†i ƒë·∫∑t v√† c·∫•u h√¨nh Worker</h3><ul><li>C√†i ƒë·∫∑t rclone v√† worker Temporal tr√™n m·ªói server.</li><li>C·∫•u h√¨nh worker ƒë·ªÉ s·ª≠ d·ª•ng rclone ƒë·ªìng b·ªô d·ªØ li·ªáu l√™n S3.</li></ul><h3 id=b∆∞·ªõc-4-qu·∫£n-l√Ω-ƒë·ªìng-b·ªô-v√†-ha>B∆∞·ªõc 4: Qu·∫£n l√Ω ƒë·ªìng b·ªô v√† HA</h3><ul><li>S·ª≠ d·ª•ng Temporal workflow ƒë·ªÉ qu·∫£n l√Ω ti·∫øn tr√¨nh ƒë·ªìng b·ªô, ch·ªâ cho ph√©p m·ªôt server ƒë·ªìng b·ªô t·∫°i m·ªôt th·ªùi ƒëi·ªÉm.</li><li>ƒê·∫£m b·∫£o t√≠nh HA, n·∫øu m·ªôt server g·∫∑p s·ª± c·ªë, c√°c server kh√°c ti·∫øp qu·∫£n ti·∫øn tr√¨nh ƒë·ªìng b·ªô.</li></ul><h3 id=b∆∞·ªõc-5-ch·∫°y-v√†-ki·ªÉm-tra>B∆∞·ªõc 5: Ch·∫°y v√† ki·ªÉm tra</h3><ul><li>Ch·∫°y Temporal server v√† worker tr√™n c·∫£ 3 server.</li><li>Ki·ªÉm tra t√≠nh ƒë·ªìng b·ªô v√† HA c·ªßa h·ªá th·ªëng.</li></ul><p><img src=/2024-09-06.png loading=lazy alt=image.png></p><h2 id=k·∫øt-lu·∫≠n>K·∫øt Lu·∫≠n</h2><p>Trong vi·ªác ƒë·∫£m b·∫£o t√≠nh s·∫µn s√†ng cao (HA) v√† tr√°nh tr√πng l·∫∑p d·ªØ li·ªáu khi ƒë·ªìng b·ªô t·ª´ m·ªôt volume chia s·∫ª l√™n nhi·ªÅu h·ªá l∆∞u tr·ªØ nh∆∞ AWS S3, Google Cloud Storage (GCS), v√† FTP, vi·ªác s·ª≠ d·ª•ng Rclone k·∫øt h·ª£p v·ªõi Temporal mang l·∫°i gi·∫£i ph√°p t·ªëi ∆∞u v√† hi·ªáu qu·∫£. Ngo√†i ra ch√∫ng ta c√≥ th·ªÉ th·ª≠ nghi·ªám tr√™n 1 m√°y duy nh·∫•t b·∫±ng c√°ch s·ª≠ d·ª±ng temporal k·∫øt h·ª£p v·ªõi sqlite3.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/temporal/>Temporal</a>
<a href=/tags/rclone/>Rclone</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main-article");renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredClasses:["gist"]})})</script></article><div class=disqus-container></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{typeof DISQUS=="object"&&DISQUS.reset({reload:!0})})</script><footer class=site-footer><section class=copyright>&copy;
2025 phongthien</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.31.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>