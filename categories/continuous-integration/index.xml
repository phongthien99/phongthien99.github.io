<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Continuous Integration on phongthien</title><link>https://phongthien99.github.io/categories/continuous-integration/</link><description>Recent content in Continuous Integration on phongthien</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 21 Jun 2025 01:00:00 +0000</lastBuildDate><atom:link href="https://phongthien99.github.io/categories/continuous-integration/index.xml" rel="self" type="application/rss+xml"/><item><title>Streamlining Deployment with GitLab CI/CD</title><link>https://phongthien99.github.io/posts/streamlining-deployment-with-gitlab-ci/cd/</link><pubDate>Sat, 21 Jun 2025 01:00:00 +0000</pubDate><guid>https://phongthien99.github.io/posts/streamlining-deployment-with-gitlab-ci/cd/</guid><description>&lt;h1 id="streamlining-deployment-with-gitlab-cicd"&gt;Streamlining Deployment with GitLab CI/CD
&lt;/h1&gt;&lt;h2 id="-1-Ä‘áº·t-váº¥n-Ä‘á»"&gt;ğŸ§© 1. Äáº·t Váº¥n Äá»
&lt;/h2&gt;&lt;p&gt;Trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, viá»‡c kiá»ƒm thá»­ vÃ  debug nhanh cÃ¡c job CI/CD lÃ  ráº¥t quan trá»ng. Tuy nhiÃªn, GitLab CI/CD thÆ°á»ng gáº·p má»™t sá»‘ váº¥n Ä‘á» khi test local báº±ng &lt;code&gt;gitlab-runner exec&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;âŒ &lt;code&gt;gitlab-runner exec&lt;/code&gt; &lt;strong&gt;khÃ´ng há»— trá»£ &lt;code&gt;include:&lt;/code&gt; hoáº·c &lt;code&gt;extends:&lt;/code&gt; tá»« file ngoÃ i&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;âŒ Pipeline thá»±c táº¿ quÃ¡ phá»©c táº¡p, chá»©a nhiá»u mÃ´i trÆ°á»ng nhÆ° &lt;code&gt;dev&lt;/code&gt;, &lt;code&gt;prod&lt;/code&gt;, &lt;code&gt;staging&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;âŒ KhÃ´ng dá»… test nhanh tá»«ng job do pháº£i khai bÃ¡o phÃ¢n tÃ¡n, phá»¥ thuá»™c nhiá»u nÆ¡i&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="-2-giáº£i-phÃ¡p"&gt;ğŸ’¡ 2. Giáº£i PhÃ¡p
&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Váº¥n Ä‘á»&lt;/th&gt;
&lt;th&gt;Giáº£i phÃ¡p&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;KhÃ´ng test local Ä‘Æ°á»£c&lt;/td&gt;
&lt;td&gt;Gom job + biáº¿n vÃ o &lt;strong&gt;1 file duy nháº¥t&lt;/strong&gt; Ä‘á»ƒ test&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Quáº£n lÃ½ nhiá»u mÃ´i trÆ°á»ng&lt;/td&gt;
&lt;td&gt;Má»—i mÃ´i trÆ°á»ng tÃ¡ch riÃªng &lt;code&gt;vars-*.yml&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;TÃ¡i sá»­ dá»¥ng script&lt;/td&gt;
&lt;td&gt;DÃ¹ng &lt;code&gt;.job-base&lt;/code&gt; lÃ m template job&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Giá»¯ file &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; gá»n&lt;/td&gt;
&lt;td&gt;Chá»‰ &lt;code&gt;include&lt;/code&gt; file tá»•ng &lt;code&gt;.ci/include.yml&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;hr&gt;
&lt;h2 id="-3-thá»±c-hiá»‡n"&gt;ğŸ› ï¸ 3. Thá»±c Hiá»‡n
&lt;/h2&gt;&lt;h3 id="-31-cáº¥u-trÃºc-thÆ°-má»¥c"&gt;ğŸ“ 3.1. Cáº¥u trÃºc thÆ° má»¥c
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-gdscript3" data-lang="gdscript3"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gitlab&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ci&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;job&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;template&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;vars&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;vars&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;vars&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prod&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;workflow&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;dev&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;workflow&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;prod&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;â”œâ”€&lt;/span&gt; &lt;span class="n"&gt;include&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;yml&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“ Ghi chÃº: ChÃºng ta tÃ¡ch cáº¥u hÃ¬nh CI/CD thÃ nh cÃ¡c thÃ nh pháº§n nhá» gá»n vÃ  rÃµ rÃ ng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Template dÃ¹ng chung&lt;/li&gt;
&lt;li&gt;Biáº¿n theo tá»«ng mÃ´i trÆ°á»ng&lt;/li&gt;
&lt;li&gt;Workflow cá»¥ thá»ƒ cho tá»«ng mÃ´i trÆ°á»ng&lt;/li&gt;
&lt;li&gt;File gom tá»•ng cho cháº¡y thá»±c táº¿ &amp;amp; cháº¡y local&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-32-Ä‘á»‹nh-nghÄ©a-job-template-cijob-templateyml"&gt;ğŸ§± 3.2. Äá»‹nh nghÄ©a job template &lt;code&gt;.ci/job-template.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;.job-base&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;stage&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;tags&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;dind&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;script&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;echo &amp;#34;ENV=$ENV&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;echo &amp;#34;API_URL=$API_URL&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;variables&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ENV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;local&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;API_URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;http://localhost:3000&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“Œ Ghi chÃº: ÄÃ¢y lÃ  template chÃ­nh, Ä‘á»‹nh nghÄ©a cÃ¡c bÆ°á»›c vÃ  biáº¿n máº·c Ä‘á»‹nh.&lt;/p&gt;
&lt;p&gt;Má»i job thá»±c táº¿ sáº½ &lt;code&gt;extends&lt;/code&gt; tá»« &lt;code&gt;.job-base&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-33-biáº¿n-mÃ´i-trÆ°á»ng"&gt;âš™ï¸ 3.3. Biáº¿n mÃ´i trÆ°á»ng
&lt;/h3&gt;&lt;h3 id="civars-devyml"&gt;&lt;code&gt;.ci/vars-dev.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;.variables-dev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;variables&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ENV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;dev&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;API_URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;https://api.dev.example.com&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="civars-localyml"&gt;&lt;code&gt;.ci/vars-local.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;.variables-local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;variables&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ENV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;local&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;API_URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;http://localhost:3000&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="civars-prodyml"&gt;&lt;code&gt;.ci/vars-prod.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;.variables-prod&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;variables&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;ENV&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;prod&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;API_URL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;https://api.prod.example.com&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“Œ Ghi chÃº: TÃ¡ch biáº¿n theo tá»«ng mÃ´i trÆ°á»ng giÃºp:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;KhÃ´ng bá»‹ nháº§m biáº¿n khi deploy&lt;/li&gt;
&lt;li&gt;Dá»… test tá»«ng mÃ´i trÆ°á»ng Ä‘á»™c láº­p&lt;/li&gt;
&lt;li&gt;Linh hoáº¡t má»Ÿ rá»™ng vá» sau (thÃªm &lt;code&gt;qa&lt;/code&gt;, &lt;code&gt;uat&lt;/code&gt;, v.v.)&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-34-Ä‘á»‹nh-nghÄ©a-cÃ¡c-job"&gt;ğŸ” 3.4. Äá»‹nh nghÄ©a cÃ¡c job
&lt;/h3&gt;&lt;h3 id="ciworkflow-devyml"&gt;&lt;code&gt;.ci/workflow-dev.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;job-dev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;extends&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="l"&gt;.job-base, .variables-dev]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="ciworkflow-prodyml"&gt;&lt;code&gt;.ci/workflow-prod.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;job-prod&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;extends&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="l"&gt;.job-base, .variables-prod]&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“Œ Ghi chÃº: Má»—i job Ä‘Æ°á»£c build báº±ng cÃ¡ch káº¿ thá»«a job-base vÃ  biáº¿n riÃªng mÃ´i trÆ°á»ng.&lt;/p&gt;
&lt;p&gt;GiÃºp cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n, khÃ´ng láº·p láº¡i.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h3 id="-35-file-includeyml"&gt;ğŸ“¦ 3.5. File &lt;code&gt;include.yml&lt;/code&gt;
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;span class="lnt"&gt;6
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;include&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.ci/job-template.yml&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.ci/vars-dev.yml&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.ci/vars-prod.yml&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.ci/workflow-dev.yml&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;local&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;.ci/workflow-prod.yml&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ“Œ Ghi chÃº: Gom táº¥t cáº£ file cáº§n thiáº¿t cho pipeline GitLab CI cháº¡y thá»±c táº¿ trÃªn server.&lt;/p&gt;
&lt;p&gt;File &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; chá»‰ cáº§n &lt;code&gt;include&lt;/code&gt; file nÃ y lÃ  Ä‘á»§.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id="-37-cháº¡y-test-local"&gt;ğŸ§ª 3.7. Cháº¡y test local
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gitlab-runner &lt;span class="nb"&gt;exec&lt;/span&gt; shell .job-base --cicd-config-file .ci/job-template.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ğŸ› ï¸ Ghi chÃº:&lt;/p&gt;
&lt;p&gt;Lá»‡nh nÃ y sáº½ cháº¡y job &lt;code&gt;.job-base&lt;/code&gt; báº±ng cáº¥u hÃ¬nh trong file &lt;code&gt;.ci/job-template.yml&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;CÃ³ thá»ƒ chá»‰nh sá»­a nhanh script, biáº¿n, v.v. Ä‘á»ƒ test mÃ  khÃ´ng áº£nh hÆ°á»Ÿng pipeline tháº­t.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h2 id="-4-káº¿t-luáº­n"&gt;âœ… 4. Káº¿t Luáº­n
&lt;/h2&gt;&lt;h3 id="-Æ°u-Ä‘iá»ƒm-Ä‘áº¡t-Ä‘Æ°á»£c"&gt;âœ… &lt;strong&gt;Æ¯u Ä‘iá»ƒm Ä‘áº¡t Ä‘Æ°á»£c&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;âœ”ï¸ Dá»… test local&lt;/strong&gt;:
â†’ Test Ä‘Æ°á»£c tá»«ng job thÃ´ng qua giÃ¡ trá»‹ cá»§a biáº¿n mÃ´i trÆ°á»ng (variable).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ”ï¸ Quáº£n lÃ½ mÃ´i trÆ°á»ng rÃµ rÃ ng&lt;/strong&gt;:
â†’ Má»—i mÃ´i trÆ°á»ng (&lt;code&gt;dev&lt;/code&gt;, &lt;code&gt;staging&lt;/code&gt;, &lt;code&gt;prod&lt;/code&gt;,&amp;hellip;) cÃ³ file biáº¿n riÃªng (&lt;code&gt;vars-*.yml&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ”ï¸ Dá»… báº£o trÃ¬ &amp;amp; má»Ÿ rá»™ng&lt;/strong&gt;:
â†’ DÃ¹ng &lt;code&gt;job-base&lt;/code&gt; nhÆ° template Ä‘á»ƒ trÃ¡nh láº·p láº¡i, dá»… má»Ÿ rá»™ng khi thÃªm job má»›i.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;âœ”ï¸ CI gá»n nháº¹&lt;/strong&gt;:
â†’ File &lt;code&gt;.gitlab-ci.yml&lt;/code&gt; chÃ­nh chá»‰ cáº§n &lt;code&gt;include&lt;/code&gt; má»™t file tá»•ng há»£p.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h3 id="-nguyÃªn-lÃ½-ká»¹-thuáº­t-pháº§n-má»m--á»©ng-dá»¥ng-trong-gitlab-cicd"&gt;ğŸ”§ &lt;strong&gt;NguyÃªn lÃ½ ká»¹ thuáº­t pháº§n má»m &amp;amp; á»¨ng dá»¥ng trong GitLab CI/CD&lt;/strong&gt;
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Function/Module Reuse (TÃ¡i sá»­ dá»¥ng hÃ m/module)&lt;/strong&gt;:
â†’ &lt;code&gt;job-base&lt;/code&gt; hoáº¡t Ä‘á»™ng nhÆ° má»™t &lt;strong&gt;hÃ m dÃ¹ng láº¡i&lt;/strong&gt;, cÃ¡c job chá»‰ cáº§n &lt;code&gt;extends&lt;/code&gt; Ä‘á»ƒ káº¿ thá»«a cáº¥u trÃºc.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Encapsulation (ÄÃ³ng gÃ³i)&lt;/strong&gt;:
â†’ Biáº¿n mÃ´i trÆ°á»ng Ä‘Æ°á»£c &lt;strong&gt;Ä‘Ã³ng gÃ³i&lt;/strong&gt; theo tá»«ng mÃ´i trÆ°á»ng riÃªng biá»‡t (&lt;code&gt;vars-dev.yml&lt;/code&gt;, &lt;code&gt;vars-prod.yml&lt;/code&gt;), giÃºp trÃ¡nh rÃ² rá»‰ hoáº·c ghi Ä‘Ã¨ sai lá»‡ch.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Composition over Inheritance (ThÃ nh pháº§n hÆ¡n káº¿ thá»«a)&lt;/strong&gt;:
â†’ Káº¿t há»£p &lt;code&gt;job-base&lt;/code&gt; + file biáº¿n (&lt;code&gt;.variables-*&lt;/code&gt;) cho phÃ©p tÃ¡i sá»­ dá»¥ng linh hoáº¡t hÆ¡n lÃ  copy/paste hoáº·c káº¿ thá»«a toÃ n bá»™ job.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Separation of Concerns (PhÃ¢n tÃ¡ch trÃ¡ch nhiá»‡m)&lt;/strong&gt;:
â†’ TÃ¡ch biá»‡t tá»«ng thÃ nh pháº§n CI/CD:
&lt;ul&gt;
&lt;li&gt;Template job (&lt;code&gt;job-template.yml&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Biáº¿n mÃ´i trÆ°á»ng (&lt;code&gt;vars-*.yml&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Luá»“ng chÃ­nh (&lt;code&gt;.gitlab-ci.yml&lt;/code&gt;)
â†’ Má»—i file chá»‰ Ä‘áº£m nháº­n &lt;strong&gt;má»™t vai trÃ² duy nháº¥t&lt;/strong&gt;, dá»… Ä‘á»c vÃ  dá»… debug.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Unit Test / Test Ä‘á»™c láº­p hÃ m&lt;/strong&gt;:
â†’ CÃ³ thá»ƒ test tá»«ng job Ä‘á»™c láº­p trong &lt;code&gt;job-template.yml&lt;/code&gt; nhÆ° cÃ¡ch viáº¿t vÃ  test unit test trong láº­p trÃ¬nh.&lt;/li&gt;
&lt;/ul&gt;</description></item></channel></rss>